<template>
    <lightning-card title="Accordion with Accounts and their Closed Opportunities" icon-name="standard:account">
        <div class="heder-block">
            <div class="slds-form-element search-input">
                <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon_left-right">
                    <lightning-icon
                        class="slds-icon slds-input__icon slds-input__icon_left slds-icon-text-default"
                        icon-name="utility:search"
                        size="x-small"
                        alternative-text="Approved"
                        title="Approved"
                    ></lightning-icon>
                    <input type="search" id="searchtext-input-id-47" placeholder="Search by Account Name or by Total Account..." class="slds-input" onsearch={handlerShowResult} />
                    <button class="slds-button slds-button_icon slds-input__icon slds-input__icon_right" title="Clear" onclick={handelClearSearch}>
                        <lightning-icon
                            class="slds-button__icon slds-icon-text-light"
                            icon-name="utility:close"
                            size="x-small"
                            alternative-text="Approved"
                            title="Approved"
                        ></lightning-icon>
                    </button>
                </div>
            </div>
        </div>

        <lightning-accordion class="acordion-box" allow-multiple-sections-open>
            <template for:each={visibleFields} for:item="m" for:index="index">
                <lightning-accordion-section key={m.nameAndClosedDeal} name={m.nameAndClosedDeal} label={m.nameAndClosedDeal}>
                    <template if:true={m.accountId}>
                        <c-account-opportunity accid={m.accountId}></c-account-opportunity>
                    </template>
                    <template if:false={m.accountId}> This Account has not Opportunities </template>
                </lightning-accordion-section>
            </template>
        </lightning-accordion>
        <div slot="footer" class="slds-var-m-vertical_medium">
            <c-paginator records={queryFields} record-size={pageSizeValue} onupdate={updateAccountHandler}></c-paginator>
        </div>
    </lightning-card>
</template>
